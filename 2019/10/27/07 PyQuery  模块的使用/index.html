<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>07 PyQuery  模块的使用 | 吴泰的博客</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">07 PyQuery  模块的使用</h1><a id="logo" href="/.">吴泰的博客</a><p class="description">学海无涯,不进则退</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">07 PyQuery  模块的使用</h1><div class="post-meta"><a href="/2019/10/27/07 PyQuery  模块的使用/#comments" class="comment-count"></a><p><span class="date">Oct 27, 2019</span><span><a href="/categories/爬虫/" class="category">爬虫</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>简介: PyQuery  模块的使用</p>
<a id="more"></a>

<h2 id="7-1-简介"><a href="#7-1-简介" class="headerlink" title="7.1 简介"></a>7.1 简介</h2><p>强大又灵活的网页解析库。PyQuery使用lxml进行快速的xml和html操作，功能和BeautfulSoup。语法和jquery 语法相似。</p>
<p>官方文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://pyquery.readthedocs.io/en/latest/</span><br></pre></td></tr></table></figure>

<h3 id="7-1-1-安装"><a href="#7-1-1-安装" class="headerlink" title="7.1.1 安装"></a>7.1.1 安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyquery</span><br></pre></td></tr></table></figure>

<p>本文所有的测试html如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">html = &apos;&apos;&apos;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">         &lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>

<h2 id="7-2-初始化"><a href="#7-2-初始化" class="headerlink" title="7.2 初始化"></a>7.2 初始化</h2><p>BeautifulSoup 是对字符串进行初始化的，PyQuery 有三种方式进行初始化</p>
<h3 id="7-2-1-字符串初始化"><a href="#7-2-1-字符串初始化" class="headerlink" title="7.2.1 字符串初始化"></a>7.2.1 字符串初始化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 设置别名</span><br><span class="line">from pyquery import PyQuery as pq</span><br><span class="line"># 生成一个pyquery 对象，传入html 字符串</span><br><span class="line">doc = pq(html)</span><br><span class="line"># 传入选择器（CSS选择器)，选择li标签</span><br><span class="line">print(doc(&apos;li&apos;))</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-2-URL初始化"><a href="#7-2-2-URL初始化" class="headerlink" title="7.2.2 URL初始化"></a>7.2.2 URL初始化</h3><p>传入URL进行初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(url=&apos;http://www.baidu.com&apos;)</span><br><span class="line"># 获取head 标签数据</span><br><span class="line">print(doc(&apos;head&apos;))</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;/&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=Edge&quot;/&gt;&lt;meta content=&quot;always&quot; name=&quot;referrer&quot;/&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://s1.bdstatic.com/r/www/cache/bdorz/baidu.min.css&quot;/&gt;&lt;title&gt;ç¾åº¦ä¸ä¸ï¼ä½ å°±ç¥é&lt;/title&gt;&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-3-文件初始化"><a href="#7-2-3-文件初始化" class="headerlink" title="7.2.3 文件初始化"></a>7.2.3 文件初始化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line"># html 文件存放在py代码文本同级目录，如果不同级，使用路径</span><br><span class="line">doc = pq(filename=&apos;demo.html&apos;)</span><br><span class="line"># 获取li标签的数据</span><br><span class="line">print(doc(&apos;li&apos;))</span><br></pre></td></tr></table></figure>

<h2 id="7-3-获取标签元素的方式"><a href="#7-3-获取标签元素的方式" class="headerlink" title="7.3 获取标签元素的方式"></a>7.3 获取标签元素的方式</h2><h3 id="7-3-1-基本CSS选择器"><a href="#7-3-1-基本CSS选择器" class="headerlink" title="7.3.1 基本CSS选择器"></a>7.3.1 基本CSS选择器</h3><p>有三种常用的解析方式</p>
<ul>
<li>ID 前面加”#“</li>
<li>class 前面加：”.”</li>
<li>标签什么也不加</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from pyquery import PyQuery as pq</span><br><span class="line"></span><br><span class="line">doc = pq(html)</span><br><span class="line"># 查找id=container 下的class=list  tag=li的对象，没有绝对的子元素的关系，只要是嵌套关系即可</span><br><span class="line"># 中间使用空格隔开</span><br><span class="line">print(doc(&apos;#container .list li&apos;))</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-2-查找元素"><a href="#7-3-2-查找元素" class="headerlink" title="7.3.2 查找元素"></a>7.3.2 查找元素</h3><h4 id="子元素"><a href="#子元素" class="headerlink" title="子元素"></a>子元素</h4><p>使用pyquery对象的find方法查找当前元素下的子元素(可以使非父子元素)<br>使用pyquery对象的children方法查找当前元素下的子元素(存在父子元素关系)   </p>
<p>注意传入的是字符串，字符串之间隔开</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"># 查找class=list的元素内容</span><br><span class="line">items = doc(&apos;.list&apos;)</span><br><span class="line"></span><br><span class="line"># items 也是Pyquery对象</span><br><span class="line">print(type(items))</span><br><span class="line">print(items)</span><br><span class="line"></span><br><span class="line"># items 也是Pyquery对象，使用find 方法，查找li 标签</span><br><span class="line">lis = items.find(&apos;li&apos;)</span><br><span class="line">print(type(lis))</span><br><span class="line">print(lis)</span><br></pre></td></tr></table></figure>

<p>结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &apos;pyquery.pyquery.PyQuery&apos;&gt;</span><br><span class="line">&lt;ul class=&quot;list&quot;&gt;</span><br><span class="line">         &lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;</span><br><span class="line"> </span><br><span class="line">&lt;class &apos;pyquery.pyquery.PyQuery&apos;&gt;</span><br><span class="line">&lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 使用children() 方法查找class= list下的所有数据</span><br><span class="line">lis = items.children()  </span><br><span class="line">print(type(lis))</span><br><span class="line">print(lis)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 使用children() 方法查找class= list下的class=active的数据</span><br><span class="line">lis = items.children(&apos;.active&apos;)</span><br><span class="line">print(lis)</span><br></pre></td></tr></table></figure>

<h4 id="父元素"><a href="#父元素" class="headerlink" title="父元素"></a>父元素</h4><p>使用pyquery对象的的parent方法，查找对象的父元素以内的内容</p>
<p>parents 方法是查找该元素的所有父节点（包括父节点的父节点）的内容，比parent多个s<br>注意：parents 显示每一个父节点以下的内容，以a标签为例，会显示这个div内容，显示整个ul内容，显示li内容，会一共显示3段数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"># 查找a 标签的上级标签，并包含a标签本身内容</span><br><span class="line"># a 标签父元素是li 标签</span><br><span class="line">items = doc(&apos;a&apos;)</span><br><span class="line">li = items.parent()</span><br><span class="line">print(type(li))</span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &apos;pyquery.pyquery.PyQuery&apos;&gt;</span><br><span class="line">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">         &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 显示a 标签块外的的所有父节点内容，显示三段父节点内的数据（a标签外有三层嵌套）</span><br><span class="line">parent = items.parents(&apos;a&apos;)</span><br><span class="line">print(parent)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 如果使用祖先节点标识，则只会显示一段数据</span><br><span class="line">parent = items.parents(&apos;祖先类 祖先id &apos;)</span><br><span class="line">print(parent)</span><br></pre></td></tr></table></figure>

<h4 id="兄弟元素"><a href="#兄弟元素" class="headerlink" title="兄弟元素"></a>兄弟元素</h4><p>使用siblings方法，查找兄弟元素，包含自己</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"># 多个类之间使用. ,同时包含item-0和active 类的标签,获取一个内容</span><br><span class="line">li = doc(&apos;.list .item-0.active&apos;)</span><br><span class="line"># 查找兄弟元素</span><br><span class="line">print(li.siblings())</span><br></pre></td></tr></table></figure>

<p>结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             &lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">             &lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>筛选兄弟元素的方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"></span><br><span class="line">li = doc(&apos;.list .item-0.active&apos;)</span><br><span class="line"># 查找兄弟元素中含有active 的元素</span><br><span class="line">print(li.siblings(&apos;.active&apos;))</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-3-遍历"><a href="#7-3-3-遍历" class="headerlink" title="7.3.3 遍历"></a>7.3.3 遍历</h3><h4 id="单个元素"><a href="#单个元素" class="headerlink" title="单个元素"></a>单个元素</h4><p>使用CSS 选择器，通过标签，id和类进行精准定位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"># 指定好标签的类或id，进行精准定位</span><br><span class="line">li = doc(&apos;.item-0.active&apos;)</span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure>

<h4 id="多个元素"><a href="#多个元素" class="headerlink" title="多个元素"></a>多个元素</h4><p>如果是多个元素，使用遍历的方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"></span><br><span class="line">lis = doc(&apos;li&apos;).items()  # 生成一个生成器，内容的是Pyquery 对象</span><br><span class="line">print(type(lis))</span><br><span class="line">for li in lis:  </span><br><span class="line">    print(li) # li是Pyquery 对象</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &apos;generator&apos;&gt;</span><br><span class="line">&lt;li class=&quot;item-0&quot;&gt;first item&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">&lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">&lt;li class=&quot;item-1 active&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7-4-获取信息"><a href="#7-4-获取信息" class="headerlink" title="7.4 获取信息"></a>7.4 获取信息</h2><h3 id="7-4-1-获取标签属性的值"><a href="#7-4-1-获取标签属性的值" class="headerlink" title="7.4.1 获取标签属性的值"></a>7.4.1 获取标签属性的值</h3><p>attr(‘规定要获取其值的属性’)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line"># 定位到一个a 标签</span><br><span class="line">a = doc(&apos;.item-0.active a&apos;)</span><br><span class="line">print(a)</span><br><span class="line"># href 属性的值，2种方法</span><br><span class="line">print(a.attr(&apos;href&apos;))</span><br><span class="line">print(a.attr.href)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">link3.html</span><br><span class="line">link3.html</span><br></pre></td></tr></table></figure>

<h3 id="7-4-2-获取文本"><a href="#7-4-2-获取文本" class="headerlink" title="7.4.2 获取文本"></a>7.4.2 获取文本</h3><p>text()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line">a = doc(&apos;.item-0.active a&apos;)</span><br><span class="line">print(a)</span><br><span class="line">print(a.text())</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;</span><br><span class="line">third item</span><br></pre></td></tr></table></figure>

<h3 id="7-4-3-获取HTML"><a href="#7-4-3-获取HTML" class="headerlink" title="7.4.3 获取HTML"></a>7.4.3 获取HTML</h3><p>html()</p>
<p>获取html内容，包含标签，text 只获取文本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line">li = doc(&apos;.item-0.active&apos;)</span><br><span class="line">print(li)</span><br><span class="line">print(li.html())</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7-5-DOM-操作"><a href="#7-5-DOM-操作" class="headerlink" title="7.5 DOM 操作"></a>7.5 DOM 操作</h2><p>对HTML节点的操作，下面的只是一部分</p>
<h3 id="addClass、removeClass"><a href="#addClass、removeClass" class="headerlink" title="addClass、removeClass"></a>addClass、removeClass</h3><p>addClass：增加类<br>removeClass：删除类  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from pyquery import PyQuery as pq</span><br><span class="line">doc = pq(html)</span><br><span class="line">li = doc(&apos;.item-0.active&apos;)</span><br><span class="line">print(&quot;初始:&quot; + str(li))</span><br><span class="line">li.removeClass(&apos;active&apos;)</span><br><span class="line">print(&quot;删除类后:&quot; + str(li))</span><br><span class="line">li.addClass(&apos;active&apos;)</span><br><span class="line">print(&quot;增加新类:&quot;+ str(li))</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">初始:&lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">删除类后:&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">             </span><br><span class="line">增加新类:&lt;li class=&quot;item-0 active&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;&lt;span class=&quot;bold&quot;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">```          </span><br><span class="line"></span><br><span class="line">###  attr、css</span><br><span class="line"></span><br><span class="line">attr: 修改/增加标签属性  </span><br><span class="line">css: 修改/增加CSS 属性</span><br></pre></td></tr></table></figure>

<p>from pyquery import PyQuery as pq<br>doc = pq(html)<br>li = doc(‘.item-0.active’)<br>print(li)<br>li.attr(‘name’, ‘link’)<br>print(li)<br>li.css(‘font-size’, ‘14px’)<br>print(li)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">结果</span><br></pre></td></tr></table></figure>

<li class="item-0 active"><a href="link3.html"><span class="bold">third item</span></a></li>

<li class="item-0 active" name="link"><a href="link3.html"><span class="bold">third item</span></a></li>

<li class="item-0 active" name="link" style="font-size: 14px"><a href="link3.html"><span class="bold">third item</span></a></li>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### remove</span><br><span class="line">删除标签</span><br></pre></td></tr></table></figure>

<p>html = ‘’’</p>
<div class="wrap">
    Hello, World
    <p>This is a paragraph.</p>
 </div>
'''
from pyquery import PyQuery as pq
doc = pq(html)
wrap = doc('.wrap')
print(wrap.text())
# 删除p 标签
wrap.find('p').remove()
print(wrap.text())
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">结果:</span><br></pre></td></tr></table></figure>

<p>Hello, World This is a paragraph.<br>Hello, World</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 其他DOM方法</span><br></pre></td></tr></table></figure>

<p><a href="http://pyquery.readthedocs.io/en/latest/api.html" target="_blank" rel="noopener">http://pyquery.readthedocs.io/en/latest/api.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 7.6 伪类选择器</span><br></pre></td></tr></table></figure>

<p>from pyquery import PyQuery as pq<br>doc = pq(html)<br>li = doc(‘li:first-child’)<br>print(li)<br>li = doc(‘li:last-child’)<br>print(li)<br>li = doc(‘li:nth-child(2)’)<br>print(li)<br>li = doc(‘li:gt(2)’)<br>print(li)<br>li = doc(‘li:nth-child(2n)’)<br>print(li)<br>li = doc(‘li:contains(second)’)<br>print(li)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">结果</span><br></pre></td></tr></table></figure>

<li class="item-0">first item</li>

<li class="item-0"><a href="link5.html">fifth item</a></li>

<li class="item-1"><a href="link2.html">second item</a></li>

<li class="item-1 active"><a href="link4.html">fourth item</a></li>
             <li class="item-0"><a href="link5.html">fifth item</a></li>

<li class="item-1"><a href="link2.html">second item</a></li>
             <li class="item-1 active"><a href="link4.html">fourth item</a></li>

<li class="item-1"><a href="link2.html">second item</a></li>
```

<p>更多CSS选择器可以查看 <a href="http://www.w3school.com.cn/css/index.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/css/index.asp</a></p>
</div><div class="post-copyright"><blockquote><p>原文作者: 吴泰</p><p>原文链接: <a href="http://yoursite.com/2019/10/27/07 PyQuery  模块的使用/">http://yoursite.com/2019/10/27/07 PyQuery  模块的使用/</a></p><p>版权声明: 转载请注明出处(必须保留原文作者署名原文链接)</p></blockquote></div><div class="tags"><a href="/tags/爬虫/">爬虫</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/10/27/08 解析模块之Xpath 模块/" class="pre">08 解析模块之Xpath 模块</a><a href="/2019/10/27/06 BeautifulSoup 模块的使用/" class="next">06 BeautifulSoup 模块的使用</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-简介"><span class="toc-text">7.1 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-安装"><span class="toc-text">7.1.1 安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-初始化"><span class="toc-text">7.2 初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-字符串初始化"><span class="toc-text">7.2.1 字符串初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-URL初始化"><span class="toc-text">7.2.2 URL初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3-文件初始化"><span class="toc-text">7.2.3 文件初始化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-获取标签元素的方式"><span class="toc-text">7.3 获取标签元素的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-1-基本CSS选择器"><span class="toc-text">7.3.1 基本CSS选择器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-2-查找元素"><span class="toc-text">7.3.2 查找元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#子元素"><span class="toc-text">子元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#父元素"><span class="toc-text">父元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#兄弟元素"><span class="toc-text">兄弟元素</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-3-遍历"><span class="toc-text">7.3.3 遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#单个元素"><span class="toc-text">单个元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多个元素"><span class="toc-text">多个元素</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-获取信息"><span class="toc-text">7.4 获取信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-1-获取标签属性的值"><span class="toc-text">7.4.1 获取标签属性的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-2-获取文本"><span class="toc-text">7.4.2 获取文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-3-获取HTML"><span class="toc-text">7.4.3 获取HTML</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-DOM-操作"><span class="toc-text">7.5 DOM 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#addClass、removeClass"><span class="toc-text">addClass、removeClass</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/11-正则解析html/">11 正则解析html</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/13-Scrapy-爬取知乎用户信息/">13 Scrapy 爬取知乎用户信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/12-scrapy-框架基础知识/"> 12 scrapy 框架基础知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/实战1-Requests-正则表达式抓取猫眼TOP100/">10 实战1 Requests+正则表达式抓取猫眼TOP100</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/09-selinux-模块/">09  selinux 模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/08 解析模块之Xpath 模块/">08 解析模块之Xpath 模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/07 PyQuery  模块的使用/">07 PyQuery  模块的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/06 BeautifulSoup 模块的使用/">06 BeautifulSoup 模块的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/05-基础模块之Request模块和Response响应/">05 基础模块之Request模块和Response响应</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/04-基础模块之-Urllib/">04 基础模块之 Urllib</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a><span class="category-list-count">13</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Anaconda/" style="font-size: 15px;">Anaconda</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">吴泰.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js?v=2.0.4"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}</script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>