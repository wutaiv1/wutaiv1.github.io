<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>09  selinux 模块 | 吴泰的博客</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">09  selinux 模块</h1><a id="logo" href="/.">吴泰的博客</a><p class="description">学海无涯,不进则退</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">09  selinux 模块</h1><div class="post-meta"><a href="/2019/10/27/09-selinux-模块/#comments" class="comment-count"></a><p><span class="date">Oct 27, 2019</span><span><a href="/categories/爬虫/" class="category">爬虫</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>摘要： Selenium 模块的使用</p>
<a id="more"></a>

<h2 id="9-1-Selenium-简介"><a href="#9-1-Selenium-简介" class="headerlink" title="9.1 Selenium 简介"></a>9.1 Selenium 简介</h2><p>selenium最初是一个自动化测试工具,而爬虫中使用它主要是为了解决requests无法直接执行JavaScript代码的问题 <strong>selenium本质是通过驱动浏览器，完全模拟浏览器的操作，比如跳转、输入、点击、下拉等</strong>，来拿到网页渲染之后的结果，可支持多种浏览器</p>
<h3 id="9-1-1-安装"><a href="#9-1-1-安装" class="headerlink" title="9.1.1 安装"></a>9.1.1 安装</h3><p><strong>1 下载驱动</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://npm.taobao.org/mirrors/chromedriver/2.35/</span><br></pre></td></tr></table></figure>

<p>if mac系统：<br>然后将解压后的chromedriver移动到/usr/local/bin目录下 </p>
<p>if window系统：<br>下载chromdriver.exe放到python安装路径的scripts目录中即可，注意最新版本是2.38，并非2.9</p>
<p><strong>2 安装pip包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple selenium</span><br></pre></td></tr></table></figure>

<p>注意：selenium3默认支持的webdriver是Firfox，而Firefox需要安装geckodriver 下载链接</p>
<h2 id="9-2-Selenium模块"><a href="#9-2-Selenium模块" class="headerlink" title="9.2 Selenium模块"></a>9.2 Selenium模块</h2><h3 id="9-2-1-基本使用"><a href="#9-2-1-基本使用" class="headerlink" title="9.2.1 基本使用"></a>9.2.1 基本使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver # webdriver 是浏览器驱动对象</span><br><span class="line">from selenium.webdriver.common.by import By #按照什么方式查找，By.ID,By.CSS_SELECTOR</span><br><span class="line">from selenium.webdriver.common.keys import Keys #键盘按键操作</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">from selenium.webdriver.support.wait import WebDriverWait #等待页面加载某些元素</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">browser=webdriver.Chrome()  # 创建chrome驱动程序的新实例</span><br><span class="line">try:</span><br><span class="line">    browser.get(&apos;https://www.jd.com&apos;)</span><br><span class="line">    input_tag=browser.find_element_by_id(&apos;key&apos;)</span><br><span class="line">    input_tag.send_keys(&apos;美女&apos;)</span><br><span class="line">    input_tag.send_keys(Keys.ENTER)  </span><br><span class="line">    </span><br><span class="line">    wait=WebDriverWait(browser,10)</span><br><span class="line">    wait.until(EC.presence_of_element_located((By.ID,&apos;J_goodsList&apos;)))  #等到id为J_goodsList的元素加载完毕,最多等10秒</span><br><span class="line">    # time.sleep(3)</span><br><span class="line">finally:</span><br><span class="line">    browser.close()   # 关闭浏览器访问</span><br></pre></td></tr></table></figure>

<h3 id="9-2-2-声明浏览器对象"><a href="#9-2-2-声明浏览器对象" class="headerlink" title="9.2.2 声明浏览器对象"></a>9.2.2 声明浏览器对象</h3><p>Selenium支持非常多的浏览器，如Chrome、Firefox、Edge等，还有Android、BlackBerry等手机端的浏览器。另外，也支持无界面浏览器PhantomJS(常用于测试的浏览器)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line"># 不同的浏览器调用，生成浏览器对象</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser = webdriver.Firefox()</span><br><span class="line">browser = webdriver.Edge()</span><br><span class="line">browser = webdriver.PhantomJS()</span><br><span class="line">browser = webdriver.Safari()</span><br></pre></td></tr></table></figure>

<h3 id="9-2-3-访问页面"><a href="#9-2-3-访问页面" class="headerlink" title="9.2.3 访问页面"></a>9.2.3 访问页面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">browser.get(&apos;http://www.baidu.com&apos;)</span><br><span class="line">print(browser.page_source)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<p>结果 返回了百度页面的html</p>
<h2 id="9-3-元素定位"><a href="#9-3-元素定位" class="headerlink" title="9.3 元素定位"></a>9.3 元素定位</h2><h3 id="9-3-1-单个元素"><a href="#9-3-1-单个元素" class="headerlink" title="9.3.1 单个元素"></a>9.3.1 单个元素</h3><p>webdriver 提供了一系列的元素定位方法，常用的有以下几种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">id</span><br><span class="line">name</span><br><span class="line">class name</span><br><span class="line">tag name</span><br><span class="line">link text</span><br><span class="line">partial link text</span><br><span class="line">xpath</span><br><span class="line">css selector</span><br></pre></td></tr></table></figure>

<p>分别对应python webdriver 中的方法为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find_element_by_id()</span><br><span class="line">find_element_by_name()</span><br><span class="line">find_element_by_class_name()</span><br><span class="line">find_element_by_tag_name()</span><br><span class="line">find_element_by_link_text()</span><br><span class="line">find_element_by_partial_link_text()</span><br><span class="line">find_element_by_xpath()</span><br><span class="line">find_element_by_css_selector()</span><br></pre></td></tr></table></figure>

<p>注意：<br>1、find_element_by_xxx找的是第一个符合条件的标签，find_elements_by_xxx找的是所有符合条件的标签。  </p>
<p>2、根据ID、CSS选择器和XPath获取，它们返回的结果完全一致。  </p>
<p>3、另外，Selenium还提供了通用方法find_element()，它需要传入两个参数：查找方式By和值。实际上，它就是find_element_by_id()这种方法的通用函数版本，比如find_element_by_id(id)就等价于find_element(By.ID, id)，二者得到的结果完全一致。  </p>
<p>CSS 选择器，常见三个</p>
<ul>
<li>ID 前面加”#“</li>
<li>class 前面加：”.”</li>
<li>标签什么也不加</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)</span><br><span class="line">input_first = browser.find_element_by_id(&apos;q&apos;)  # 通过id </span><br><span class="line">input_second = browser.find_element_by_css_selector(&apos;#q&apos;) # css选择器</span><br><span class="line">input_third = browser.find_element_by_xpath(&apos;//*[@id=&quot;q&quot;]&apos;) </span><br><span class="line">print(input_first, input_second, input_third,sep=&quot;\n&quot;)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<p>三个相同的结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;cd7948e7b8a1d20ce7c548a036ab30f8&quot;, element=&quot;b2eca734-38a4-4ad8-aaec-b575047cccd3&quot;)&gt;</span><br><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;cd7948e7b8a1d20ce7c548a036ab30f8&quot;, element=&quot;b2eca734-38a4-4ad8-aaec-b575047cccd3&quot;)&gt;</span><br><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;cd7948e7b8a1d20ce7c548a036ab30f8&quot;, element=&quot;b2eca734-38a4-4ad8-aaec-b575047cccd3&quot;)&gt;</span><br></pre></td></tr></table></figure>

<p>使用<strong>browser.find_element</strong>进行获取元素，获取的结果和上面相同 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)</span><br><span class="line">input_first = browser.find_element(By.ID, &apos;q&apos;) # id=q</span><br><span class="line">print(input_first)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<h3 id="9-3-2-多个的元素"><a href="#9-3-2-多个的元素" class="headerlink" title="9.3.2 多个的元素"></a>9.3.2 多个的元素</h3><p>find_elements :查找多个<br>find_element :查找单个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)</span><br><span class="line">lis = browser.find_elements_by_css_selector(&apos;.service-bd li&apos;)</span><br><span class="line">print(lis)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)</span><br><span class="line">lis = browser.find_elements(By.CSS_SELECTOR, &apos;.service-bd li&apos;)</span><br><span class="line">print(lis)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<h2 id="9-4-元素交互"><a href="#9-4-元素交互" class="headerlink" title="9.4 元素交互"></a>9.4 元素交互</h2><p>Selenium可以驱动浏览器来执行一些操作，也就是说可以让浏览器模拟执行一些动作。</p>
<h3 id="9-4-1-元素交互常用操作"><a href="#9-4-1-元素交互常用操作" class="headerlink" title="9.4.1 元素交互常用操作"></a>9.4.1 元素交互常用操作</h3><p>比较常见的用法有：</p>
<ul>
<li>输入文字时用send_keys()方法，</li>
<li>清空文字时用clear()方法，</li>
<li>点击按钮时用click()方法。<br>示例如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">import time</span><br><span class="line">browser = webdriver.Chrome()  # 调用谷歌浏览器</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)  # 访问淘宝页面</span><br><span class="line">input = browser.find_element_by_id(&apos;q&apos;) # 找到  id = 9 的元素 </span><br><span class="line">input.send_keys(&apos;MAC&apos;) # 输入文字mac</span><br><span class="line">time.sleep(1)</span><br><span class="line">input.clear()</span><br><span class="line">input.send_keys(&apos;IPhone&apos;)</span><br><span class="line">button = browser.find_element_by_class_name(&apos;btn-search&apos;)  </span><br><span class="line">button.click() # 点击搜索</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>结果: 弹出一个淘宝页面，搜索框内先输入MAC ,再输入IPhone并进行搜索</p>
<p><a href="https://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement" target="_blank" rel="noopener">常见节点的操作</a></p>
<h3 id="9-4-2-动作链"><a href="#9-4-2-动作链" class="headerlink" title="9.4.2 动作链"></a>9.4.2 动作链</h3><p>在上面的实例中，一些交互动作都是针对某个节点执行的。比如，对于输入框，我们就调用它的输入文字和清空文字方法；对于按钮，就调用它的点击方法。其实，还有另外一些操作，它们没有特定的执行对象，比如鼠标拖曳、键盘按键等，这些动作用另一种方式来执行，那就是动作链。<br>比如，现在实现一个节点的拖曳操作，将某个节点从一处拖曳到另外一处，可以这样实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver import ActionChains</span><br><span class="line">import time</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = &apos;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&apos;</span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to.frame(&apos;iframeResult&apos;)</span><br><span class="line">source = browser.find_element_by_css_selector(&apos;#draggable&apos;)  # 源</span><br><span class="line">target = browser.find_element_by_css_selector(&apos;#droppable&apos;)  # 目标</span><br><span class="line">actions = ActionChains(browser) # </span><br><span class="line"># actions.drag_and_drop(source, target)</span><br><span class="line">actions.click_and_hold(source)  # 点击保持</span><br><span class="line">time.sleep(3)</span><br><span class="line">for i in range(5):  # 每隔0.5s ,x轴移动17像素</span><br><span class="line">    actions.move_by_offset(xoffset=17,yoffset=0).perform()</span><br><span class="line">    time.sleep(0.5)</span><br><span class="line"></span><br><span class="line">actions.release()</span><br></pre></td></tr></table></figure>

<p><a href="https://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.common.action_chains" target="_blank" rel="noopener">更多的动作链操</a></p>
<h2 id="9-5-执行JavaScript"><a href="#9-5-执行JavaScript" class="headerlink" title="9.5 执行JavaScript"></a>9.5 执行JavaScript</h2><p>对于某些操作，Selenium API并没有提供。比如，下拉进度条，它可以直接模拟运行JavaScript，此时使用execute_script()方法即可实现，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.jd.com/&apos;)</span><br><span class="line">browser.execute_script(&apos;window.scrollTo(0, document.body.scrollHeight)&apos;)</span><br><span class="line">browser.execute_script(&apos;alert(&quot;123&quot;)&apos;)</span><br></pre></td></tr></table></figure>

<h2 id="9-6-获取元素信息"><a href="#9-6-获取元素信息" class="headerlink" title="9.6 获取元素信息"></a>9.6 获取元素信息</h2><p>通过page_source属性可以获取网页的源代码，接着就可以使用解析库（如正则表达式、Beautiful Soup、pyquery等）来提取信息了。<br>不过，既然Selenium已经提供了选择节点的方法，返回的是WebElement类型，那么它也有相关的方法和属性来直接提取节点信息，如属性、文本等。这样的话，我们就可以不用通过解析源代码来提取信息了，非常方便。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.by import By #按照什么方式查找，By.ID,By.CSS_SELECTOR</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">from selenium.webdriver.support.wait import WebDriverWait #等待页面加载某些元素</span><br><span class="line"></span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">browser.get(&apos;https://www.amazon.cn/&apos;)</span><br><span class="line"></span><br><span class="line">wait=WebDriverWait(browser,10)</span><br><span class="line">wait.until(EC.presence_of_element_located((By.ID,&apos;cc-lm-tcgShowImgContainer&apos;)))</span><br><span class="line"></span><br><span class="line"># 定位获取标签</span><br><span class="line">tag=browser.find_element(By.CSS_SELECTOR,&apos;#cc-lm-tcgShowImgContainer img&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#获取标签属性，</span><br><span class="line">print(tag.get_attribute(&apos;src&apos;))</span><br><span class="line">#获取标签ID，位置，名称，大小（了解）</span><br><span class="line">print(tag.id)</span><br><span class="line">print(tag.location)</span><br><span class="line">print(tag.tag_name)</span><br><span class="line">print(tag.size)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<h3 id="9-6-1-获取标签属性"><a href="#9-6-1-获取标签属性" class="headerlink" title="9.6.1  获取标签属性"></a>9.6.1  获取标签属性</h3><p>get_attribute() 方法</p>
<p>通过定位id=zh-top-link-logo的标签，获取该标签的class 属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver import ActionChains</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = &apos;https://www.zhihu.com/explore&apos;</span><br><span class="line">browser.get(url)</span><br><span class="line">logo = browser.find_element_by_id(&apos;zh-top-link-logo&apos;)</span><br><span class="line">print(logo)</span><br><span class="line">print(logo.get_attribute(&apos;class&apos;))</span><br></pre></td></tr></table></figure>

<h3 id="9-6-2-获取文本"><a href="#9-6-2-获取文本" class="headerlink" title="9.6.2  获取文本"></a>9.6.2  获取文本</h3><p>text 属性(该方法加入@property装饰器)</p>
<p>搜索class=Tabs-link 标签的文本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = &apos;https://www.zhihu.com/explore&apos;</span><br><span class="line">browser.get(url)</span><br><span class="line">input = browser.find_element_by_class_name(&apos;Tabs-link&apos;)</span><br><span class="line">print(input.text)</span><br></pre></td></tr></table></figure>

<p>结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">首页</span><br></pre></td></tr></table></figure>

<p>知乎源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a class=&quot;Tabs-link AppHeader-TabsLink&quot; href=&quot;//www.zhihu.com/&quot; data-za-not-track-link=&quot;true&quot;&gt;首页&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="9-6-3-获取ID、位置、标签名、大小"><a href="#9-6-3-获取ID、位置、标签名、大小" class="headerlink" title="9.6.3  获取ID、位置、标签名、大小"></a>9.6.3  获取ID、位置、标签名、大小</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = &apos;https://www.zhihu.com/explore&apos;</span><br><span class="line">browser.get(url)</span><br><span class="line">input = browser.find_element_by_class_name(&apos;zu-top-add-question&apos;)</span><br><span class="line">print(input.id)</span><br><span class="line">print(input.location)</span><br><span class="line">print(input.tag_name)</span><br><span class="line">print(input.size)</span><br></pre></td></tr></table></figure>

<p>结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0.6822924344980397-1</span><br><span class="line">&#123;&apos;y&apos;: 7, &apos;x&apos;: 774&#125;</span><br><span class="line">button</span><br><span class="line">&#123;&apos;height&apos;: 32, &apos;width&apos;: 66&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-6-3-Frame"><a href="#9-6-3-Frame" class="headerlink" title="9.6.3  Frame"></a>9.6.3  Frame</h3><iframe>元素会创建包含另外一个文档的内联框架（即行内框架）

<p>从父frame切换到子frame ,再从子切换到父frame.</p>
<p>不能从子freme 查找父frame </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.common.exceptions import NoSuchElementException</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = &apos;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&apos;</span><br><span class="line">browser.get(url)</span><br><span class="line"># 切换到子元素frame</span><br><span class="line">browser.switch_to.frame(&apos;iframeResult&apos;)</span><br><span class="line">source = browser.find_element_by_css_selector(&apos;#draggable&apos;)</span><br><span class="line">print(source)</span><br><span class="line">try:</span><br><span class="line">    # 查父元素frame会报错</span><br><span class="line">    logo = browser.find_element_by_class_name(&apos;logo&apos;)</span><br><span class="line">except NoSuchElementException:</span><br><span class="line">    print(&apos;NO LOGO&apos;)</span><br><span class="line"></span><br><span class="line"># 切换到父元素frame</span><br><span class="line">1browser.switch_to.parent_frame()</span><br><span class="line">logo = browser.find_element_by_class_name(&apos;logo&apos;)</span><br><span class="line">print(logo)</span><br><span class="line">print(logo.text)</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;4bb8ac03ced4ecbdefef03ffdc0e4ccd&quot;, element=&quot;0.44746093888932004-1&quot;)&gt;</span><br><span class="line">NO LOGO</span><br><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=&quot;4bb8ac03ced4ecbdefef03ffdc0e4ccd&quot;, element=&quot;0.13792611320464965-2&quot;)&gt;</span><br><span class="line">RUNOOB.COM</span><br></pre></td></tr></table></figure>

<h2 id="9-7-延时等待"><a href="#9-7-延时等待" class="headerlink" title="9.7 延时等待"></a>9.7 延时等待</h2><p>在Selenium中，get()方法会在网页框架加载结束后结束执行，此时如果获取page_source，可能并不是浏览器完全加载完成的页面，如果某些页面有额外的Ajax请求，我们在网页源代码中也不一定能成功获取到。所以，这里需要延时等待一定时间，确保节点已经加载出来。这里等待的方式有两种：一种是隐式等待，一种是显式等待。  </p>
<h3 id="9-7-2-隐式等待"><a href="#9-7-2-隐式等待" class="headerlink" title="9.7.2 隐式等待"></a>9.7.2 隐式等待</h3><p><strong>browser.implicitly_wait(10)</strong><br>当使用隐式等待执行测试的时候，如果Selenium没有在DOM中找到节点，将继续等待，超出设定时间后，则抛出找不到节点的异常。换句话说，当查找节点而节点并没有立即出现的时候，隐式等待将等待一段时间再查找DOM，默认的时间是0。示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver import ActionChains</span><br><span class="line">from selenium.webdriver.common.by import By #按照什么方式查找，By.ID,By.CSS_SELECTOR</span><br><span class="line">from selenium.webdriver.common.keys import Keys #键盘按键操作</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">from selenium.webdriver.support.wait import WebDriverWait #等待页面加载某些元素</span><br><span class="line"></span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">#隐式等待:在查找所有元素时，如果尚未被加载，则等10秒</span><br><span class="line">browser.implicitly_wait(10)</span><br><span class="line"></span><br><span class="line">browser.get(&apos;https://www.baidu.com&apos;)</span><br><span class="line">input_tag=browser.find_element_by_id(&apos;kw&apos;)</span><br><span class="line">input_tag.send_keys(&apos;美女&apos;)</span><br><span class="line">input_tag.send_keys(Keys.ENTER)</span><br><span class="line"></span><br><span class="line">contents=browser.find_element_by_id(&apos;content_left&apos;) #没有等待环节而直接查找，找不到则会报错</span><br><span class="line">print(contents)</span><br><span class="line"></span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<h3 id="9-7-2-显示等待"><a href="#9-7-2-显示等待" class="headerlink" title="9.7.2 显示等待"></a>9.7.2 显示等待</h3><p><strong>wait=WebDriverWait(browser,10)<br>wait.until(EC.presence_of_element_located((By.ID,’content_left’)))</strong></p>
<p>隐式等待的效果其实并没有那么好，因为我们只规定了一个固定时间，而页面的加载时间会受到网络条件的影响。这里还有一种更合适的显式等待方法，它指定要查找的节点，然后指定一个最长等待时间。如果在规定时间内加载出来了这个节点，就返回查找的节点；如果到了规定时间依然没有加载出该节点，则抛出超时异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver import ActionChains</span><br><span class="line">from selenium.webdriver.common.by import By #按照什么方式查找，By.ID,By.CSS_SELECTOR</span><br><span class="line">from selenium.webdriver.common.keys import Keys #键盘按键操作</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">from selenium.webdriver.support.wait import WebDriverWait #等待页面加载某些元素</span><br><span class="line"></span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.baidu.com&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">input_tag=browser.find_element_by_id(&apos;kw&apos;)</span><br><span class="line">input_tag.send_keys(&apos;美女&apos;)</span><br><span class="line">input_tag.send_keys(Keys.ENTER)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#显式等待：显式地等待某个元素被加载</span><br><span class="line">wait=WebDriverWait(browser,10)</span><br><span class="line"># presence_of_element_located ：定位器-用于查找元素，找到后返回WebElement</span><br><span class="line">wait.until(EC.presence_of_element_located((By.ID,&apos;content_left&apos;)))</span><br><span class="line"></span><br><span class="line">contents=browser.find_element(By.CSS_SELECTOR,&apos;#content_left&apos;)</span><br><span class="line">print(contents)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<p>关于等待条件，其实还有很多，比如判断标题内容，判断某个节点内是否出现了某文字等。更多查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.support.expected_conditions</span><br></pre></td></tr></table></figure>

<p>不同的条件，每个条件都是一个类</p>
<ul>
<li>title_is 标题是某内容</li>
<li>title_contains 标题包含某内容</li>
<li>presence_of_element_located 元素加载出，传入定位元组，如(By.ID, ‘p’)</li>
<li>visibility_of_element_located 元素可见，传入定位元组</li>
<li>visibility_of 可见，传入元素对象</li>
<li>presence_of_all_elements_located 所有元素加载出</li>
<li>text_to_be_present_in_element 某个元素文本包含某文字</li>
<li>text_to_be_present_in_element_value 某个元素值包含某文字</li>
<li>frame_to_be_available_and_switch_to_it frame加载并切换</li>
<li>invisibility_of_element_located 元素不可见</li>
<li>element_to_be_clickable 元素可点击</li>
<li>staleness_of 判断一个元素是否仍在DOM，可判断页面是否已经刷新</li>
<li>element_to_be_selected 元素可选择，传元素对象</li>
<li>element_located_to_be_selected 元素可选择，传入定位元组</li>
<li>element_selection_state_to_be 传入元素对象以及状态，相等返回True，否则返回False</li>
<li>element_located_selection_state_to_be 传入定位元组以及状态，相等返回True，否则返回False</li>
<li>alert_is_present 是否出现Alert</li>
</ul>
<h2 id="9-8-前进和后退"><a href="#9-8-前进和后退" class="headerlink" title="9.8 前进和后退"></a>9.8 前进和后退</h2><p>平常使用浏览器时都有前进和后退功能，Selenium也可以完成这个操作，它使用back()方法后退，使用forward()方法前进。<br>示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#模拟浏览器的前进后退</span><br><span class="line">import time </span><br><span class="line">from selenium import webdriver </span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.baidu.com&apos;)</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)</span><br><span class="line">browser.get(&apos;http://www.sina.com.cn/&apos;)</span><br><span class="line">browser.back()time.sleep(10)</span><br><span class="line">browser.forward()</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<h2 id="9-9-Cookies"><a href="#9-9-Cookies" class="headerlink" title="9.9 Cookies"></a>9.9 Cookies</h2><p>使用Selenium，还可以方便地对Cookies进行操作，例如获取、添加、删除Cookies等。<br>示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver </span><br><span class="line">browser =webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.zhihu.com/explore&apos;)</span><br><span class="line">print(browser.get_cookies())</span><br><span class="line">browser.add_cookie(&#123;&apos;name&apos;:&apos;name&apos;,&apos;domain&apos;:&apos;www.zhihu.com&apos;,&apos;value&apos;:&apos;germey&apos;&#125;)</span><br><span class="line">print(browser.get_cookies())</span><br><span class="line">browser.delete_all_cookies()</span><br><span class="line">print(browser.get_cookies())</span><br></pre></td></tr></table></figure>

<h2 id="9-10-选项卡管理"><a href="#9-10-选项卡管理" class="headerlink" title="9.10 选项卡管理"></a>9.10 选项卡管理</h2><p>同一个浏览器下选项卡操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">from selenium import webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(&apos;https://www.baidu.com&apos;)</span><br><span class="line">browser.execute_script(&apos;window.open()&apos;)  # 打开一个新的选项卡</span><br><span class="line">print(browser.window_handles)  # 返回所有选项卡</span><br><span class="line">browser.switch_to_window(browser.window_handles[1])  # 切换到第二个选项卡</span><br><span class="line">browser.get(&apos;https://www.taobao.com&apos;)</span><br><span class="line">time.sleep(1)</span><br><span class="line">browser.switch_to_window(browser.window_handles[0])  # 切换到第一个选项卡</span><br><span class="line">browser.get(&apos;https://python.org&apos;)</span><br></pre></td></tr></table></figure>

<h2 id="9-10-异常处理"><a href="#9-10-异常处理" class="headerlink" title="9.10 异常处理"></a>9.10 异常处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.common.exceptions import TimeoutException,NoSuchElementException,NoSuchFrameException</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    browser=webdriver.Chrome()</span><br><span class="line">    browser.get(&apos;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&apos;)</span><br><span class="line">    browser.switch_to.frame(&apos;iframssseResult&apos;)</span><br><span class="line"></span><br><span class="line">except TimeoutException as e:</span><br><span class="line">    print(e)</span><br><span class="line">except NoSuchFrameException as e:</span><br><span class="line">    print(e)</span><br><span class="line">finally:</span><br><span class="line">    browser.close()</span><br></pre></td></tr></table></figure>

<h2 id="案例讲解"><a href="#案例讲解" class="headerlink" title="案例讲解"></a>案例讲解</h2><h3 id="滑动验证码的破解"><a href="#滑动验证码的破解" class="headerlink" title="滑动验证码的破解"></a>滑动验证码的破解</h3><p>通过灰度值判断是否是图片缺口；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.support.ui import WebDriverWait # 等待元素加载的</span><br><span class="line">from selenium.webdriver.common.action_chains import ActionChains  #拖拽</span><br><span class="line">from selenium.webdriver.support import expected_conditions as EC</span><br><span class="line">from selenium.common.exceptions import TimeoutException, NoSuchElementException</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line">from PIL import Image</span><br><span class="line">import requests</span><br><span class="line">import re</span><br><span class="line">import random</span><br><span class="line">from io import BytesIO</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def merge_image(image_file,location_list):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">     拼接图片</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    im = Image.open(image_file)</span><br><span class="line">    im.save(&apos;code.jpg&apos;)</span><br><span class="line">    new_im = Image.new(&apos;RGB&apos;,(260,116))</span><br><span class="line">    # 把无序的图片 切成52张小图片</span><br><span class="line">    im_list_upper = []</span><br><span class="line">    im_list_down = []</span><br><span class="line">    # print(location_list)</span><br><span class="line">    for location in location_list:</span><br><span class="line">        # print(location[&apos;y&apos;])</span><br><span class="line">        if location[&apos;y&apos;] == -58: # 上半边</span><br><span class="line">            im_list_upper.append(im.crop((abs(location[&apos;x&apos;]),58,abs(location[&apos;x&apos;])+10,116)))</span><br><span class="line">        if location[&apos;y&apos;] == 0:  # 下半边</span><br><span class="line">            im_list_down.append(im.crop((abs(location[&apos;x&apos;]),0,abs(location[&apos;x&apos;])+10,58)))</span><br><span class="line"></span><br><span class="line">    x_offset = 0</span><br><span class="line">    for im in im_list_upper:</span><br><span class="line">        new_im.paste(im,(x_offset,0))  # 把小图片放到 新的空白图片上</span><br><span class="line">        x_offset += im.size[0]</span><br><span class="line"></span><br><span class="line">    x_offset = 0</span><br><span class="line">    for im in im_list_down:</span><br><span class="line">        new_im.paste(im,(x_offset,58))</span><br><span class="line">        x_offset += im.size[0]</span><br><span class="line">    #new_im.show()</span><br><span class="line">    return new_im</span><br><span class="line"></span><br><span class="line">def get_image(driver,div_path):</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">    下载无序的图片  然后进行拼接 获得完整的图片</span><br><span class="line">    :param driver:</span><br><span class="line">    :param div_path:</span><br><span class="line">    :return:</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">    background_images = driver.find_elements_by_xpath(div_path)</span><br><span class="line">    location_list = []</span><br><span class="line">    for background_image in background_images:</span><br><span class="line">        location = &#123;&#125;</span><br><span class="line">        result = re.findall(&apos;background-image: url\(&quot;(.*?)&quot;\); background-position: (.*?)px (.*?)px;&apos;,background_image.get_attribute(&apos;style&apos;))</span><br><span class="line">        # print(result)</span><br><span class="line">        location[&apos;x&apos;] = int(result[0][1])</span><br><span class="line">        location[&apos;y&apos;] = int(result[0][2])</span><br><span class="line"></span><br><span class="line">        image_url = result[0][0]</span><br><span class="line">        location_list.append(location)</span><br><span class="line">    image_url = image_url.replace(&apos;webp&apos;,&apos;jpg&apos;)</span><br><span class="line">    # &apos;替换url http://static.geetest.com/pictures/gt/579066de6/579066de6.webp&apos;</span><br><span class="line">    image_result = requests.get(image_url).content</span><br><span class="line">    image_file = BytesIO(image_result) # 是一张无序的图片</span><br><span class="line">    image = merge_image(image_file,location_list)</span><br><span class="line"></span><br><span class="line">    return image</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_track(distance):</span><br><span class="line"></span><br><span class="line">    # 初速度</span><br><span class="line">    v=0</span><br><span class="line">    # 单位时间为0.2s来统计轨迹，轨迹即0.2内的位移</span><br><span class="line">    t=0.2</span><br><span class="line">    # 位移/轨迹列表，列表内的一个元素代表0.2s的位移</span><br><span class="line">    tracks=[]</span><br><span class="line">    tracks_back=[]</span><br><span class="line">    # 当前的位移</span><br><span class="line">    current=0</span><br><span class="line">    # 到达mid值开始减速</span><br><span class="line">    mid=distance * 7/8</span><br><span class="line">    print(&quot;distance&quot;,distance)</span><br><span class="line">    global random_int</span><br><span class="line">    random_int=8</span><br><span class="line">    distance += random_int # 先滑过一点，最后再反着滑动回来</span><br><span class="line"></span><br><span class="line">    while current &lt; distance:</span><br><span class="line">        if current &lt; mid:</span><br><span class="line">            # 加速度越小，单位时间的位移越小,模拟的轨迹就越多越详细</span><br><span class="line">            a = random.randint(2,5)  # 加速运动</span><br><span class="line">        else:</span><br><span class="line">            a = -random.randint(2,5) # 减速运动</span><br><span class="line">        # 初速度</span><br><span class="line">        v0 = v</span><br><span class="line">        # 0.2秒时间内的位移</span><br><span class="line">        s = v0*t+0.5*a*(t**2)</span><br><span class="line">        # 当前的位置</span><br><span class="line">        current += s</span><br><span class="line">        # 添加到轨迹列表</span><br><span class="line">        if round(s)&gt;0:</span><br><span class="line">            tracks.append(round(s))</span><br><span class="line">        else:</span><br><span class="line">            tracks_back.append(round(s))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        # 速度已经达到v,该速度作为下次的初速度</span><br><span class="line">        v= v0+a*t</span><br><span class="line"></span><br><span class="line">        print(&quot;tracks:&quot;,tracks)</span><br><span class="line">        print(&quot;tracks_back:&quot;,tracks_back)</span><br><span class="line">        print(&quot;current:&quot;,current)</span><br><span class="line"></span><br><span class="line">    # 反着滑动到大概准确位置</span><br><span class="line"></span><br><span class="line">    tracks_back.append(distance-current)</span><br><span class="line">    tracks_back.extend([-2,-5,-8,])</span><br><span class="line"></span><br><span class="line">    return tracks,tracks_back</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_distance(image1,image2):</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">       拿到滑动验证码需要移动的距离</span><br><span class="line">      :param image1:没有缺口的图片对象</span><br><span class="line">      :param image2:带缺口的图片对象</span><br><span class="line">      :return:需要移动的距离</span><br><span class="line">      &apos;&apos;&apos;</span><br><span class="line">    # print(&apos;size&apos;, image1.size)</span><br><span class="line"></span><br><span class="line">    threshold = 50</span><br><span class="line">    for i in range(0,image1.size[0]):  # 260</span><br><span class="line">        for j in range(0,image1.size[1]):  # 160</span><br><span class="line">            pixel1 = image1.getpixel((i,j))</span><br><span class="line">            pixel2 = image2.getpixel((i,j))</span><br><span class="line">            res_R = abs(pixel1[0]-pixel2[0]) # 计算RGB差</span><br><span class="line">            res_G = abs(pixel1[1] - pixel2[1])  # 计算RGB差</span><br><span class="line">            res_B = abs(pixel1[2] - pixel2[2])  # 计算RGB差</span><br><span class="line">            if res_R &gt; threshold and res_G &gt; threshold and res_B &gt; threshold:</span><br><span class="line">                return i  # 需要移动的距离</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main_check_code(driver,element):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    拖动识别验证码</span><br><span class="line">    :param driver:</span><br><span class="line">    :param element:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    login_btn = driver.find_element_by_class_name(&apos;js-login&apos;)</span><br><span class="line">    login_btn.click()</span><br><span class="line"></span><br><span class="line">    element = WebDriverWait(driver, 30, 0.5).until(EC.element_to_be_clickable((By.CLASS_NAME, &apos;gt_guide_tip&apos;)))</span><br><span class="line">    slide_btn = driver.find_element_by_class_name(&apos;gt_guide_tip&apos;)</span><br><span class="line">    slide_btn.click()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    image1 = get_image(driver, &apos;//div[@class=&quot;gt_cut_bg gt_show&quot;]/div&apos;)</span><br><span class="line">    image2 = get_image(driver, &apos;//div[@class=&quot;gt_cut_fullbg gt_show&quot;]/div&apos;)</span><br><span class="line">    # 图片上 缺口的位置的x坐标</span><br><span class="line"></span><br><span class="line">    # 2 对比两张图片的所有RBG像素点，得到不一样像素点的x值，即要移动的距离</span><br><span class="line">    l = get_distance(image1, image2)</span><br><span class="line">    print(&apos;l=&apos;,l)</span><br><span class="line"></span><br><span class="line">    # 3 获得移动轨迹</span><br><span class="line">    track_list = get_track(l)</span><br><span class="line">    print(&apos;第一步,点击滑动按钮&apos;)</span><br><span class="line">    element = WebDriverWait(driver, 30, 0.5).until(EC.element_to_be_clickable((By.CLASS_NAME, &apos;gt_slider_knob&apos;)))</span><br><span class="line">    ActionChains(driver).click_and_hold(on_element=element).perform()  # 点击鼠标左键，按住不放</span><br><span class="line">    import time</span><br><span class="line">    time.sleep(0.4)</span><br><span class="line">    print(&apos;第二步,拖动元素&apos;)</span><br><span class="line">    for track in track_list[0]:</span><br><span class="line">         ActionChains(driver).move_by_offset(xoffset=track, yoffset=0).perform()  # 鼠标移动到距离当前位置（x,y）</span><br><span class="line">    #time.sleep(0.4)</span><br><span class="line">    for track in track_list[1]:</span><br><span class="line">          ActionChains(driver).move_by_offset(xoffset=track, yoffset=0).perform()  # 鼠标移动到距离当前位置（x,y）</span><br><span class="line">          time.sleep(0.1)</span><br><span class="line">    import time</span><br><span class="line">    time.sleep(0.6)</span><br><span class="line">    # ActionChains(driver).move_by_offset(xoffset=2, yoffset=0).perform()  # 鼠标移动到距离当前位置（x,y）</span><br><span class="line">    # ActionChains(driver).move_by_offset(xoffset=8, yoffset=0).perform()  # 鼠标移动到距离当前位置（x,y）</span><br><span class="line">    # ActionChains(driver).move_by_offset(xoffset=2, yoffset=0).perform()  # 鼠标移动到距离当前位置（x,y）</span><br><span class="line">    print(&apos;第三步,释放鼠标&apos;)</span><br><span class="line">    ActionChains(driver).release(on_element=element).perform()</span><br><span class="line">    time.sleep(1)</span><br><span class="line"></span><br><span class="line">def main_check_slider(driver):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    检查滑动按钮是否加载</span><br><span class="line">    :param driver:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    while True:</span><br><span class="line">        try :</span><br><span class="line">            driver.get(&apos;https://www.huxiu.com/&apos;)</span><br><span class="line">            element = WebDriverWait(driver, 30, 0.5).until(EC.element_to_be_clickable((By.CLASS_NAME, &apos;js-login&apos;)))</span><br><span class="line">            if element:</span><br><span class="line">                return element</span><br><span class="line">        except TimeoutException as e:</span><br><span class="line">            print(&apos;超时错误，继续&apos;)</span><br><span class="line">            time.sleep(5)</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        count = 3  # 最多识别3次</span><br><span class="line">        driver = webdriver.Chrome()</span><br><span class="line">        while count &gt; 0:</span><br><span class="line">            # 等待滑动按钮加载完成</span><br><span class="line">            element = main_check_slider(driver)</span><br><span class="line">            main_check_code(driver,element)</span><br><span class="line">            try:</span><br><span class="line">                success_element = (By.CSS_SELECTOR, &apos;.gt_success&apos;)</span><br><span class="line">                # 得到成功标志</span><br><span class="line">                success_images = WebDriverWait(driver,3).until(EC.presence_of_element_located(success_element))</span><br><span class="line">                if success_images:</span><br><span class="line">                    print(&apos;成功识别！！！！！！&apos;)</span><br><span class="line">                    count = 0</span><br><span class="line">                    import sys</span><br><span class="line">                    sys.exit()</span><br><span class="line">            except Exception as e:</span><br><span class="line">                print(&apos;识别错误，继续&apos;)</span><br><span class="line">                count -= 1</span><br><span class="line">                time.sleep(1)</span><br><span class="line">        else:</span><br><span class="line">            print(&apos;too many attempt check code &apos;)</span><br><span class="line">            exit(&apos;退出程序&apos;)</span><br><span class="line">    finally:</span><br><span class="line">        driver.close()</span><br></pre></td></tr></table></figure></iframe></div><div class="post-copyright"><blockquote><p>原文作者: 吴泰</p><p>原文链接: <a href="http://yoursite.com/2019/10/27/09-selinux-模块/">http://yoursite.com/2019/10/27/09-selinux-模块/</a></p><p>版权声明: 转载请注明出处(必须保留原文作者署名原文链接)</p></blockquote></div><div class="tags"><a href="/tags/爬虫/">爬虫</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/10/27/实战1-Requests-正则表达式抓取猫眼TOP100/" class="pre">10 实战1 Requests+正则表达式抓取猫眼TOP100</a><a href="/2019/10/27/08 解析模块之Xpath 模块/" class="next">08 解析模块之Xpath 模块</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-Selenium-简介"><span class="toc-text">9.1 Selenium 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-1-安装"><span class="toc-text">9.1.1 安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-Selenium模块"><span class="toc-text">9.2 Selenium模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1-基本使用"><span class="toc-text">9.2.1 基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2-声明浏览器对象"><span class="toc-text">9.2.2 声明浏览器对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-3-访问页面"><span class="toc-text">9.2.3 访问页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-元素定位"><span class="toc-text">9.3 元素定位</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-1-单个元素"><span class="toc-text">9.3.1 单个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-2-多个的元素"><span class="toc-text">9.3.2 多个的元素</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-元素交互"><span class="toc-text">9.4 元素交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-1-元素交互常用操作"><span class="toc-text">9.4.1 元素交互常用操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-2-动作链"><span class="toc-text">9.4.2 动作链</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5-执行JavaScript"><span class="toc-text">9.5 执行JavaScript</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-6-获取元素信息"><span class="toc-text">9.6 获取元素信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-1-获取标签属性"><span class="toc-text">9.6.1  获取标签属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-2-获取文本"><span class="toc-text">9.6.2  获取文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-3-获取ID、位置、标签名、大小"><span class="toc-text">9.6.3  获取ID、位置、标签名、大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-3-Frame"><span class="toc-text">9.6.3  Frame</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-7-延时等待"><span class="toc-text">9.7 延时等待</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-2-隐式等待"><span class="toc-text">9.7.2 隐式等待</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-2-显示等待"><span class="toc-text">9.7.2 显示等待</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-8-前进和后退"><span class="toc-text">9.8 前进和后退</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-9-Cookies"><span class="toc-text">9.9 Cookies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-10-选项卡管理"><span class="toc-text">9.10 选项卡管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-10-异常处理"><span class="toc-text">9.10 异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#案例讲解"><span class="toc-text">案例讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#滑动验证码的破解"><span class="toc-text">滑动验证码的破解</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/11-正则解析html/">11 正则解析html</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/13-Scrapy-爬取知乎用户信息/">13 Scrapy 爬取知乎用户信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/12-scrapy-框架基础知识/"> 12 scrapy 框架基础知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/实战1-Requests-正则表达式抓取猫眼TOP100/">10 实战1 Requests+正则表达式抓取猫眼TOP100</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/09-selinux-模块/">09  selinux 模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/08 解析模块之Xpath 模块/">08 解析模块之Xpath 模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/07 PyQuery  模块的使用/">07 PyQuery  模块的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/06 BeautifulSoup 模块的使用/">06 BeautifulSoup 模块的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/05-基础模块之Request模块和Response响应/">05 基础模块之Request模块和Response响应</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/27/04-基础模块之-Urllib/">04 基础模块之 Urllib</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a><span class="category-list-count">13</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Anaconda/" style="font-size: 15px;">Anaconda</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">吴泰.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js?v=2.0.4"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins'));
  mermaid.initialize(options);
}</script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>